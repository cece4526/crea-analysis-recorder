<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Soja - CRÃ‰A Analysis</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="/build/app.css" rel="stylesheet">
    <link href="/build/dashboard.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container-fluid mt-3">
        <div class="row align-items-center mb-4">
            <div class="col">
                <h1 class="text-primary">ðŸ«˜ Dashboard de Production - Soja</h1>
            </div>
            <div class="col-auto">
                <a href="/" class="btn btn-outline-primary">
                    <i class="fas fa-home"></i> Retour Accueil
                </a>
            </div>
        </div>
        
        <div class="dev-notice">
            <h4>ðŸš§ Dashboard Soja - En DÃ©veloppement</h4>
            <p class="mb-0">Ce dashboard est en cours de dÃ©veloppement. Les fonctionnalitÃ©s spÃ©cifiques au soja seront bientÃ´t disponibles.</p>
        </div>
        
        <div class="row">
            <!-- OF 1 -->
            <div class="col-md-6">
                {% if of1 %}
                <div class="of-header">
                    <h3>ðŸ«˜ OF {{ of1.numero }}</h3>
                    <p class="mb-0">
                        <span class="status-indicator status-{{ of1.statut }}"></span>
                        Statut: {{ of1.statut|upper }}
                    </p>
                    {% if of1.produit %}
                    <p class="mb-0">Produit: {{ of1.produit }}</p>
                    {% endif %}
                    {% if of1.quantite %}
                    <p class="mb-0">QuantitÃ©: {{ of1.quantite }}</p>
                    {% endif %}
                </div>
                
                <div class="process-card">
                    <h5>ðŸ”¬ Analyses Soja</h5>
                    <div class="row">
                        <div class="col-6">
                            <div class="text-center p-3 border rounded">
                                <div class="status-indicator status-en-cours"></div>
                                <strong>Ã‰chantillons</strong>
                                <div class="mt-2">
                                    <small class="text-muted">En cours d'analyse</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="text-center p-3 border rounded">
                                <div class="status-indicator status-en-attente"></div>
                                <strong>Analyses</strong>
                                <div class="mt-2">
                                    <small class="text-muted">En attente</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="process-card">
                    <h5>ðŸ¥› Okara & Corrections</h5>
                    <div class="row">
                        <div class="col-4">
                            <div class="text-center p-2 border rounded">
                                <div class="status-indicator status-en-cours"></div>
                                <strong>Okara</strong><br>
                                <small>Production</small>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="text-center p-2 border rounded">
                                <div class="status-indicator status-en-attente"></div>
                                <strong>Av. Correct</strong><br>
                                <small>--:--</small>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="text-center p-2 border rounded">
                                <div class="status-indicator status-en-attente"></div>
                                <strong>Ap. Correct</strong><br>
                                <small>--:--</small>
                            </div>
                        </div>
                    </div>
                </div>
                {% else %}
                <div class="of-header">
                    <h3>ðŸ«˜ Aucun OF Soja actif</h3>
                    <p class="mb-0">Pas d'ordre de fabrication soja en cours</p>
                </div>
                {% endif %}
            </div>
            
            <!-- OF 2 -->
            <div class="col-md-6">
                {% if of2 %}
                <div class="of-header">
                    <h3>ðŸ«˜ OF {{ of2.numero }}</h3>
                    <p class="mb-0">
                        <span class="status-indicator status-{{ of2.statut }}"></span>
                        Statut: {{ of2.statut|upper }}
                    </p>
                    {% if of2.produit %}
                    <p class="mb-0">Produit: {{ of2.produit }}</p>
                    {% endif %}
                    {% if of2.quantite %}
                    <p class="mb-0">QuantitÃ©: {{ of2.quantite }}</p>
                    {% endif %}
                </div>
                
                <div class="process-card">
                    <h5>ðŸ”¬ Analyses Soja</h5>
                    <div class="row">
                        <div class="col-6">
                            <div class="text-center p-3 border rounded">
                                <div class="status-indicator status-termine"></div>
                                <strong>Ã‰chantillons</strong>
                                <div class="mt-2">
                                    <small class="text-muted">TerminÃ©</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="text-center p-3 border rounded">
                                <div class="status-indicator status-en-cours"></div>
                                <strong>Analyses</strong>
                                <div class="mt-2">
                                    <small class="text-muted">En cours</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="process-card">
                    <h5>ðŸ¥› Okara & Corrections</h5>
                    <div class="row">
                        <div class="col-4">
                            <div class="text-center p-2 border rounded">
                                <div class="status-indicator status-termine"></div>
                                <strong>Okara</strong><br>
                                <small>TerminÃ©</small>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="text-center p-2 border rounded">
                                <div class="status-indicator status-en-cours"></div>
                                <strong>Av. Correct</strong><br>
                                <small>11:30</small>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="text-center p-2 border rounded">
                                <div class="status-indicator status-en-attente"></div>
                                <strong>Ap. Correct</strong><br>
                                <small>--:--</small>
                            </div>
                        </div>
                    </div>
                </div>
                {% else %}
                <div class="of-header">
                    <h3>ðŸ«˜ Slot libre</h3>
                    <p class="mb-0">PrÃªt pour un nouvel OF soja</p>
                </div>
                {% endif %}
            </div>
        </div>
        
        <!-- Statistiques -->
        <div class="row mt-4">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <h5>ðŸ“Š Statistiques Soja</h5>
                    </div>
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-md-3">
                                <h4 class="text-info">{{ total_of }}</h4>
                                <p>OF Soja totaux</p>
                            </div>
                            <div class="col-md-3">
                                <h4 class="text-success">{{ of1 and of2 ? 2 : (of1 ? 1 : 0) }}</h4>
                                <p>OF actifs</p>
                            </div>
                            <div class="col-md-3">
                                <h4 class="text-warning">-</h4>
                                <p>Analyses en cours</p>
                            </div>
                            <div class="col-md-3">
                                <h4 class="text-primary">{{ "now"|date("H:i") }}</h4>
                                <p>Heure actuelle</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- FonctionnalitÃ©s Ã  venir -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card border-info">
                    <div class="card-header bg-info text-white">
                        <h5>ðŸš€ FonctionnalitÃ©s Ã  Venir</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <ul class="list-unstyled">
                                    <li><i class="fas fa-check-circle text-success"></i> Suivi des analyses soja dÃ©taillÃ©es</li>
                                    <li><i class="fas fa-check-circle text-success"></i> Gestion spÃ©cifique des Ã©chantillons</li>
                                    <li><i class="fas fa-check-circle text-success"></i> Processus Okara optimisÃ©</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <ul class="list-unstyled">
                                    <li><i class="fas fa-check-circle text-success"></i> Corrections avant/aprÃ¨s spÃ©cialisÃ©es</li>
                                    <li><i class="fas fa-check-circle text-success"></i> Tableaux de bord temps rÃ©el</li>
                                    <li><i class="fas fa-check-circle text-success"></i> Rapports de qualitÃ© automatisÃ©s</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Inclusion de la popup HACCP -->
    {% include 'partials/haccp_modal.html.twig' %}
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/build/runtime.js"></script>
    <script src="/build/app.js"></script>
</body>
</html>
